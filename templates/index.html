<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>XPRESS | Plataforma de Servi√ßos</title>

  <!-- CORRIGIDO PARA FLASK -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style-main.css') }}" />

  <style>
    #chatbot {
      position: fixed;
      bottom: 70px;
      right: 30px;
      width: 320px;
      max-height: 420px;
      background: #221442;
      border-radius: 16px;
      box-shadow: 0 6px 20px #370e5644;
      display: flex;
      flex-direction: column;
      font-family: 'Montserrat', Arial, sans-serif;
      color: #dbb0ff;
      overflow: hidden;
      z-index: 1000;
      visibility: hidden;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    #chatbot.mostrar {
      visibility: visible;
      opacity: 1;
      transform: translateY(0);
    }
    .chat-header {
      background: linear-gradient(90deg, #bc5fff 35%, #4f227a 100%);
      padding: 12px 22px;
      font-weight: 900;
      font-size: 1.2rem;
    }
    .chat-messages {
      flex: 1;
      padding: 12px 20px;
      overflow-y: auto;
      font-size: 0.95rem;
      line-height: 1.3;
    }
    .chat-messages div {
      margin-bottom: 10px;
      word-wrap: break-word;
    }
    .chat-input-area {
      display: flex;
      border-top: 2px solid #4f227a;
      background: #19151f;
      padding: 10px 12px;
    }
    #chatInput {
      flex: 1;
      padding: 10px 14px;
      border-radius: 12px;
      border: 2px solid #a94ffb;
      outline: none;
      font-size: 1rem;
      color: #fff;
      background: #221442;
      font-family: 'Montserrat', Arial, sans-serif;
    }
    #chatInput::placeholder {
      color: #8a62cc;
    }
    #sendBtn {
      margin-left: 12px;
      padding: 10px 16px;
      font-weight: 700;
      font-size: 1rem;
      border-radius: 12px;
      border: none;
      background: linear-gradient(90deg, #bc5fff 35%, #4f227a 100%);
      color: #fff;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    #sendBtn:hover {
      background: linear-gradient(90deg, #dbb0ff 10%, #bc5fff 90%);
    }
    #toggleChatbot {
      position: fixed;
      bottom: 20px;
      right: 30px;
      background: #bc5fff;
      border: none;
      width: 52px;
      height: 52px;
      border-radius: 50%;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 6px 20px #370e5644;
      color: #4f227a;
      z-index: 1001;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  </style>
</head>
<body>
  <header>
    <div class="container header-inner">
      <div class="logo">XPRESS</div>
      <nav>
        <a href="#catalog">Cat√°logo de Servi√ßos</a>
        <a href="#funcionalidades">Como Funciona</a>
        <a href="#planos">Planos</a>
        <button class="cta" id="btnLogin" onclick="window.location.href='login.html'">Login</button>
        <button class="cta" id="btnRegistrar">Cadastrar-se</button>
      </nav>
    </div>
  </header>

  <section class="hero">
    <div class="container hero-inner">
      <h1>Plataforma de Servi√ßos XPRESS</h1>
      <div class="hero-desc">
        Conectamos clientes e prestadores de servi√ßos de forma r√°pida e confi√°vel.
        <br />
        Acesse servi√ßos diversos, compare pre√ßos e contrate com seguran√ßa e agilidade.
      </div>
      <div class="hero-ctas">
        <button class="btn-primary" onclick="scrollToSection('catalog')">Explorar Servi√ßos</button>
        <button class="btn-primary" onclick="scrollToSection('planos')">Ver Planos</button>
      </div>
    </div>
  </section>

  <main class="container">
    <h2 class="section-title" id="catalog">Principais Funcionalidades</h2>

    <section class="features">
      <article class="feature">
        <h3>Cat√°logo de Servi√ßos XPRESS</h3>
        <p>Explore uma lista completa de servi√ßos com descri√ß√£o detalhada, escopo e consulta f√°cil da faixa de pre√ßo min‚Äìmax.</p>
      </article>
      <article class="feature">
        <h3>Destaque para os melhores prestadores</h3>
        <p>Filtro inteligente mostra profissionais nota ‚â• 4,5. Avalia√ß√µes reais e ordena√ß√£o por nota, pre√ßo ou tempo de resposta.</p>
      </article>
      <article class="feature">
        <h3>Perfil Profissional</h3>
        <p>Veja portf√≥lio, certifica√ß√µes e dados profissionais para escolher com confian√ßa. Compare prestadores facilmente.</p>
      </article>
      <article class="feature">
        <h3>Xpress Request</h3>
        <p>Descreva sua necessidade em poucos passos. Receba sugest√£o autom√°tica de profissionais com pre√ßo e nota ideais.</p>
      </article>
      <article class="feature">
        <h3>Chat Integrado & Pagamento Seguro</h3>
        <p>Comunique-se direto, envie documentos, pague com prote√ß√£o e s√≥ libere ap√≥s aprova√ß√£o. Suporte a reembolso e disputa.</p>
      </article>
      <article class="feature">
        <h3>Painel do Cliente e Prestador</h3>
        <p>Gerencie solicita√ß√µes, hist√≥rico, notifica√ß√µes, agenda, desempenho e indicadores. Organize e monitore tudo pelo painel.</p>
      </article>
      <article class="feature">
        <h3>Seguran√ßa XPRESS</h3>
        <p>Prestadores verificados, comunica√ß√£o criptografada e pagamento garantido contra fraudes.</p>
      </article>
    </section>

    <h2 class="section-title" id="planos">Planos PDV Comercial</h2>
    <section class="plans-section">
      <div class="plan-card">
        <div class="plan-title">B√°sico</div>
        <div class="plan-price">R$00/m√™s</div>
        <div class="plan-feats">
          ‚Ä¢ Cadastro de servi√ßos ilimitados<br />
          ‚Ä¢ Emiss√£o de ordem de servi√ßo simples<br />
          ‚Ä¢ Suporte por e-mail<br />
          ‚Ä¢ Gest√£o de neg√≥cios b√°sica
        </div>
        <button class="btn-cadastrar" data-plano="basico">Quero me cadastrar</button>
      </div>
      <div class="plan-card">
        <div class="plan-title">Plus</div>
        <div class="plan-price">R$79/m√™s</div>
        <div class="plan-feats">
          ‚Ä¢ Tudo do B√°sico<br />
          ‚Ä¢ Dashboard de neg√≥cios<br />
          ‚Ä¢ Relat√≥rios e gr√°ficos<br />
          ‚Ä¢ Integra√ß√£o com delivery externo<br />
          ‚Ä¢ Suporte por WhatsApp
        </div>
        <button class="btn-cadastrar" data-plano="plus">Quero me cadastrar</button>
      </div>
      <div class="plan-card">
        <div class="plan-title">Premium</div>
        <div class="plan-price">R$149/m√™s</div>
        <div class="plan-feats">
          ‚Ä¢ Tudo do Plus<br />
          ‚Ä¢ Campanhas de marketing exclusivas<br />
          ‚Ä¢ Gest√£o avan√ßada de clientes<br />
          ‚Ä¢ API para integra√ß√µes<br />
          ‚Ä¢ Suporte priorit√°rio 24h
        </div>
        <button class="btn-cadastrar" data-plano="premium">Quero me cadastrar</button>
      </div>
    </section>
  </main>

  <footer>
    ¬© 2025 XPRESS | Conectando clientes e profissionais com tecnologia, agilidade e seguran√ßa.
  </footer>

  <!-- Chatbot -->
  <div id="chatbot" class="chatbot-container">
    <div class="chat-header">Atendimento XPRESS</div>
    <div class="chat-messages" id="chatMessages"></div>
    <div class="chat-input-area">
      <input type="text" id="chatInput" placeholder="Digite sua mensagem..." autocomplete="off" />
      <button id="sendBtn">Enviar</button>
    </div>
  </div>
  <button id="toggleChatbot" title="Abrir chat">üí¨</button>

  <script>
    function scrollToSection(id) {
      const el = document.getElementById(id);
      if (el) {
        el.scrollIntoView({ behavior: "smooth" });
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      const btnRegistrar = document.getElementById("btnRegistrar");
      if (btnRegistrar) {
        btnRegistrar.addEventListener("click", () => {
          window.location.href = "cadastro.html";
        });
      }

      const planButtons = document.querySelectorAll(".btn-cadastrar");
      planButtons.forEach(button => {
        button.addEventListener("click", () => {
          const plano = button.getAttribute("data-plano") || "";
          window.location.href = `cadastro.html?plano=${plano}`;
        });
      });
    });

    const chatbot = document.getElementById('chatbot');
    const toggleBtn = document.getElementById('toggleChatbot');

    toggleBtn.addEventListener('click', () => {
      chatbot.classList.toggle('mostrar');
    });

    async function enviarPergunta(pergunta) {
      try {
        const response = await fetch('https://victorzinn.pythonanywhere.com/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message: pergunta }),
        });

        const data = await response.json();
        return data.reply || 'Desculpe, n√£o entendi.';
      } catch (error) {
        return `Erro: ${error.message}`;
      }
    }

    async function processarChat() {
      const perguntaInput = document.getElementById('chatInput');
      const caixaMensagens = document.getElementById('chatMessages');
      const pergunta = perguntaInput.value.trim();
      if (!pergunta) return;

      const divPergunta = document.createElement('div');
      divPergunta.textContent = 'Voc√™: ' + pergunta;
      divPergunta.style.color = '#bc5fff';
      caixaMensagens.appendChild(divPergunta);

      perguntaInput.value = '';
      caixaMensagens.scrollTop = caixaMensagens.scrollHeight;

      const resposta = await enviarPergunta(pergunta);
      const divResposta = document.createElement('div');
      divResposta.textContent = 'Bot: ' + resposta;
      divResposta.style.color = '#dbb0ff';
      caixaMensagens.appendChild(divResposta);

      caixaMensagens.scrollTop = caixaMensagens.scrollHeight;
    }

    document.getElementById('sendBtn').addEventListener('click', processarChat);
    document.getElementById('chatInput').addEventListener('keydown', function (e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        processarChat();
      }
    });
  </script>
</body>
</html>
